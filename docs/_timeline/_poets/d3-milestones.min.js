!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).milestones=n()}(this,function(){"use strict";function T(){T=function(){return u};var u={},t=Object.prototype,c=t.hasOwnProperty,l=Object.defineProperty||function(t,n,e){t[n]=e.value},n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",e=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function o(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{o({},"")}catch(t){o=function(t,n,e){return t[n]=e}}function a(t,n,e,r){var i,o,u,a,n=n&&n.prototype instanceof h?n:h,n=Object.create(n.prototype),r=new x(r||[]);return l(n,"_invoke",{value:(i=t,o=e,u=r,a="suspendedStart",function(t,n){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===t)throw n;return M()}for(u.method=t,u.arg=n;;){var e=u.delegate;if(e){var r=function t(n,e){var r=e.method,i=n.iterator[r];if(void 0===i)return e.delegate=null,"throw"===r&&n.iterator.return&&(e.method="return",e.arg=void 0,t(n,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var i=s(i,n.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;i=i.arg;return i?i.done?(e[n.resultName]=i.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}(e,u);if(r){if(r===f)continue;return r}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if("suspendedStart"===a)throw a="completed",u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);a="executing";r=s(i,o,u);if("normal"===r.type){if(a=u.done?"completed":"suspendedYield",r.arg===f)continue;return{value:r.arg,done:u.done}}"throw"===r.type&&(a="completed",u.method="throw",u.arg=r.arg)}})}),n}function s(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}u.wrap=a;var f={};function h(){}function p(){}function g(){}var d={};o(d,r,function(){return this});n=Object.getPrototypeOf,n=n&&n(n(_([])));n&&n!==t&&c.call(n,r)&&(d=n);var y=g.prototype=h.prototype=Object.create(d);function v(t){["next","throw","return"].forEach(function(n){o(t,n,function(t){return this._invoke(n,t)})})}function m(u,a){var n;l(this,"_invoke",{value:function(e,r){function t(){return new a(function(t,n){!function n(t,e,r,i){t=s(u[t],u,e);if("throw"!==t.type){var o=t.arg;return(e=o.value)&&"object"==typeof e&&c.call(e,"__await")?a.resolve(e.__await).then(function(t){n("next",t,r,i)},function(t){n("throw",t,r,i)}):a.resolve(e).then(function(t){o.value=t,r(o)},function(t){return n("throw",t,r,i)})}i(t.arg)}(e,r,t,n)})}return n=n?n.then(t,t):t()}})}function w(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function b(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function _(n){if(n){var t=n[r];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var e=-1,t=function t(){for(;++e<n.length;)if(c.call(n,e))return t.value=n[e],t.done=!1,t;return t.value=void 0,t.done=!0,t};return t.next=t}}return{next:M}}function M(){return{value:void 0,done:!0}}return l(y,"constructor",{value:p.prototype=g,configurable:!0}),l(g,"constructor",{value:p,configurable:!0}),p.displayName=o(g,i,"GeneratorFunction"),u.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,o(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},u.awrap=function(t){return{__await:t}},v(m.prototype),o(m.prototype,e,function(){return this}),u.AsyncIterator=m,u.async=function(t,n,e,r,i){void 0===i&&(i=Promise);var o=new m(a(t,n,e,r),i);return u.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},v(y),o(y,i,"Generator"),o(y,r,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),u.keys=function(t){var n,e=Object(t),r=[];for(n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},u.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var n in this)"t"===n.charAt(0)&&c.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var u=c.call(i,"catchLoc"),a=c.call(i,"finallyLoc");if(u&&a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),f},finish:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),b(e),f}},catch:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r,i=e.completion;return"throw"===i.type&&(r=i.arg,b(e)),r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:_(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},u}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,i,o,u,a=[],c=!0,l=!1;try{if(o=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;c=!1}else for(;!(c=(r=o.call(e)).done)&&(a.push(r.value),a.length!==n);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=e.return&&(u=e.return(),Object(u)!==u))return}finally{if(l)throw i}}return a}}(t,n)||a(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function U(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=a(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw i}}}}var i="http://www.w3.org/1999/xhtml",o={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function u(t){var n=t+="",e=n.indexOf(":");return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),o.hasOwnProperty(n)?{space:o[n],local:t}:t}function c(t){t=u(t);return(t.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===i&&t.documentElement.namespaceURI===i?t.createElement(e):t.createElementNS(n,e)}})(t)}function n(){}function f(t){return null==t?n:function(){return this.querySelector(t)}}function h(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function p(){return[]}function e(n){return function(t){return t.matches(n)}}var l=Array.prototype.find;function s(){return this.firstElementChild}var g=Array.prototype.filter;function d(){return Array.from(this.children)}function t(t){return new Array(t.length)}function y(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function M(t,n,e,r,i,o){for(var u,a=0,c=n.length,l=o.length;a<l;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new y(t,o[a]);for(;a<c;++a)(u=n[a])&&(i[a]=u)}function A(t,n,e,r,i,o,u){for(var a,c,l=new Map,s=n.length,f=o.length,h=new Array(s),p=0;p<s;++p)(a=n[p])&&(h[p]=c=u.call(a,a.__data__,p,n)+"",l.has(c)?i[p]=a:l.set(c,a));for(p=0;p<f;++p)c=u.call(t,o[p],p,o)+"",(a=l.get(c))?((r[p]=a).__data__=o[p],l.delete(c)):e[p]=new y(t,o[p]);for(p=0;p<s;++p)(a=n[p])&&l.get(h[p])===a&&(i[p]=a)}function S(t){return t.__data__}function v(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}function m(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function w(t){return t.trim().split(/^|\s+/)}function b(t){return t.classList||new x(t)}function x(t){this._node=t,this._names=w(t.getAttribute("class")||"")}function C(t,n){for(var e=b(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function N(t,n){for(var e=b(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function k(){this.textContent=""}function D(){this.innerHTML=""}function L(){this.nextSibling&&this.parentNode.appendChild(this)}function I(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function O(){return null}function Y(){var t=this.parentNode;t&&t.removeChild(this)}function F(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function j(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function H(o){return function(){var t=this.__on;if(t){for(var n,e=0,r=-1,i=t.length;e<i;++e)n=t[e],o.type&&n.type!==o.type||n.name!==o.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function z(u,a,c){return function(){var t,n,e=this.__on,r=(n=a,function(t){n.call(this,t,this.__data__)});if(e)for(var i=0,o=e.length;i<o;++i)if((t=e[i]).type===u.type&&t.name===u.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=r,t.options=c),void(t.value=a);this.addEventListener(u.type,r,c),t={type:u.type,name:u.name,value:a,listener:r,options:c},e?e.push(t):this.__on=[t]}}function R(t,n,e){var r=m(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}y.prototype={constructor:y,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},x.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var q=T().mark(P);function P(){var n,e,r,i,o,u,a;return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this._groups,e=0,r=n.length;case 1:if(!(e<r)){t.next=13;break}i=n[e],o=0,u=i.length;case 3:if(!(o<u)){t.next=10;break}if(a=i[o])return t.next=7,a;t.next=7;break;case 7:++o,t.next=3;break;case 10:++e,t.next=1;break;case 13:case"end":return t.stop()}},q,this)}var G=[null];function B(t,n){this._groups=t,this._parents=n}function Z(t){return"string"==typeof t?new B([[document.querySelector(t)]],[document.documentElement]):new B([[t]],G)}function V(t){return"string"==typeof t?new B([document.querySelectorAll(t)],[document.documentElement]):new B([h(t)],G)}function Q(t,n){return null==t||null==n?NaN:t<n?-1:n<t?1:n<=t?0:NaN}function W(e){var o,u,i;function a(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.length;if(e<r){if(0!==o(n,n))return r;do{var i=e+r>>>1}while(u(t[i],n)<0?e=1+i:r=i,e<r)}return e}return i=2!==e.length?(o=Q,u=function(t,n){return Q(e(t),n)},function(t,n){return e(t)-n}):(o=e===Q||e===function(t,n){return null==t||null==n?NaN:n<t?-1:t<n?1:t<=n?0:NaN}?e:$,u=e),{left:a,center:function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=a(t,n,e,(3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.length)-1);return e<r&&i(t[r-1],n)>-i(t[r],n)?r-1:r},right:function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.length;if(e<r){if(0!==o(n,n))return r;do{var i=e+r>>>1}while(u(t[i],n)<=0?e=1+i:r=i,e<r)}return e}}}function $(){return 0}B.prototype=(ct={constructor:B,select:function(t){"function"!=typeof t&&(t=f(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],c=a.length,l=r[i]=new Array(c),s=0;s<c;++s)(o=a[s])&&(u=t.call(o,o.__data__,s,a))&&("__data__"in o&&(u.__data__=o.__data__),l[s]=u);return new B(r,this._parents)},selectAll:function(t){var n,e;t="function"==typeof t?(e=t,function(){return h(e.apply(this,arguments))}):null==(n=t)?p:function(){return this.querySelectorAll(n)};for(var r=this._groups,i=r.length,o=[],u=[],a=0;a<i;++a)for(var c,l=r[a],s=l.length,f=0;f<s;++f)(c=l[f])&&(o.push(t.call(c,c.__data__,f,l)),u.push(c));return new B(o,u)},selectChild:function(t){return this.select(null==t?s:(n="function"==typeof t?t:e(t),function(){return l.call(this.children,n)}));var n},selectChildren:function(t){return this.selectAll(null==t?d:(n="function"==typeof t?t:e(t),function(){return g.call(this.children,n)}));var n},filter:function(t){var n;"function"!=typeof t&&(n=t,t=function(){return this.matches(n)});for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var u,a=e[o],c=a.length,l=i[o]=[],s=0;s<c;++s)(u=a[s])&&t.call(u,u.__data__,s,a)&&l.push(u);return new B(i,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,S);var e,r=n?A:M,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var u=o.length,a=new Array(u),c=new Array(u),l=new Array(u),s=0;s<u;++s){var f=i[s],h=o[s],p=h.length,g="object"===_(g=t.call(f,f&&f.__data__,s,i))&&"length"in g?g:Array.from(g),d=g.length,y=c[s]=new Array(d),v=a[s]=new Array(d);r(f,h,y,v,l[s]=new Array(p),g,n);for(var m,w,b=0,x=0;b<d;++b)if(m=y[b]){for(x<=b&&(x=b+1);!(w=v[x])&&++x<d;);m._next=w||null}}return(a=new B(a,i))._enter=c,a._exit=l,a},enter:function(){return new B(this._enter||this._groups.map(t),this._parents)},exit:function(){return new B(this._exit||this._groups.map(t),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit(),r="function"==typeof t?(r=t(r))&&r.selection():r.append(t+"");return null!=n&&(i=(i=n(i))&&i.selection()),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var t=t.selection?t.selection():t,n=this._groups,e=t._groups,r=n.length,t=e.length,i=Math.min(r,t),o=new Array(r),u=0;u<i;++u)for(var a,c=n[u],l=e[u],s=c.length,f=o[u]=new Array(s),h=0;h<s;++h)(a=c[h]||l[h])&&(f[h]=a);for(;u<r;++u)o[u]=n[u];return new B(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];0<=--o;)(r=i[o])&&(u&&4^r.compareDocumentPosition(u)&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e=e||v;for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var u,a=n[o],c=a.length,l=i[o]=new Array(c),s=0;s<c;++s)(u=a[s])&&(l[s]=u);l.sort(t)}return new B(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){var t,n=0,e=U(this);try{for(e.s();!(t=e.n()).done;){t.value;++n}}catch(t){e.e(t)}finally{e.f()}return n},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},attr:function(t,n){var e=u(t);if(arguments.length<2){t=this.node();return e.local?t.getAttributeNS(e.space,e.local):t.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}:function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return 1<arguments.length?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(n,e,r){return function(){var t=e.apply(this,arguments);null==t?this.style.removeProperty(n):this.style.setProperty(n,t,r)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):(e=this.node(),t=t,e.style.getPropertyValue(t)||m(e).getComputedStyle(e,null).getPropertyValue(t))},property:function(t,n){return 1<arguments.length?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=w(t+"");if(arguments.length<2){for(var r=b(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?C:N)(this,t)}}:n?function(t){return function(){C(this,t)}}:function(t){return function(){N(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?k:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?D:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(L)},lower:function(){return this.each(I)},append:function(t){var n="function"==typeof t?t:c(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:c(t),r=null==n?O:"function"==typeof n?n:f(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Y)},clone:function(t){return this.select(t?j:F)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return 0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}),u=o.length;if(!(arguments.length<2)){for(a=n?z:H,r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var c,l=0,s=a.length;l<s;++l)for(r=0,c=a[l];r<u;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return R(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return R(this,t,n)}})(t,n))}},ut=Symbol.iterator,at=P,(ut=function(t){t=function(t,n){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===n?String:Number)(t);n=e.call(t,n||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==typeof t?t:String(t)}(ut))in ct?Object.defineProperty(ct,ut,{value:at,enumerable:!0,configurable:!0,writable:!0}):ct[ut]=at,ct);var X=W(Q).right;W(function(t){return null===t?NaN:+t}).center;var J=Math.sqrt(50),K=Math.sqrt(10),tt=Math.sqrt(2);function nt(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),e=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),r=r/e;return J<=r?e*=10:K<=r?e*=5:tt<=r&&(e*=2),n<t?-e:e}function et(t,n){var e;if(void 0===n){var r,i=U(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(e<o||void 0===e&&o<=o)&&(e=o)}}catch(t){i.e(t)}finally{i.f()}}else{var u,a,c=-1,l=U(t);try{for(l.s();!(u=l.n()).done;)null!=(a=n(a=u.value,++c,t))&&(e<a||void 0===e&&a<=a)&&(e=a)}catch(t){l.e(t)}finally{l.f()}}return e}function rt(t,n,e){(t.prototype=n.prototype=e).constructor=t}function it(t,n){var e,r=Object.create(t.prototype);for(e in n)r[e]=n[e];return r}function ot(){}var ut="\\s*([+-]?\\d+)\\s*",at="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lt=/^#([0-9a-f]{3,8})$/,st=new RegExp("^rgb\\(".concat(ut,",").concat(ut,",").concat(ut,"\\)$")),ft=new RegExp("^rgb\\(".concat(ct,",").concat(ct,",").concat(ct,"\\)$")),ht=new RegExp("^rgba\\(".concat(ut,",").concat(ut,",").concat(ut,",").concat(at,"\\)$")),pt=new RegExp("^rgba\\(".concat(ct,",").concat(ct,",").concat(ct,",").concat(at,"\\)$")),gt=new RegExp("^hsl\\(".concat(at,",").concat(ct,",").concat(ct,"\\)$")),dt=new RegExp("^hsla\\(".concat(at,",").concat(ct,",").concat(ct,",").concat(at,"\\)$")),yt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vt(){return this.rgb().formatHex()}function mt(){return this.rgb().formatRgb()}function wt(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=lt.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?bt(n):3===e?new Mt(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?xt(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?xt(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=st.exec(t))?new Mt(n[1],n[2],n[3],1):(n=ft.exec(t))?new Mt(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=ht.exec(t))?xt(n[1],n[2],n[3],n[4]):(n=pt.exec(t))?xt(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=gt.exec(t))?kt(n[1],n[2]/100,n[3]/100,1):(n=dt.exec(t))?kt(n[1],n[2]/100,n[3]/100,n[4]):yt.hasOwnProperty(t)?bt(yt[t]):"transparent"===t?new Mt(NaN,NaN,NaN,0):null}function bt(t){return new Mt(t>>16&255,t>>8&255,255&t,1)}function xt(t,n,e,r){return new Mt(t=r<=0?n=e=NaN:t,n,e,r)}function _t(t,n,e,r){return 1===arguments.length?(i=(i=t)instanceof ot?i:wt(i))?new Mt((i=i.rgb()).r,i.g,i.b,i.opacity):new Mt:new Mt(t,n,e,null==r?1:r);var i}function Mt(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Tt(){return"#".concat(Nt(this.r)).concat(Nt(this.g)).concat(Nt(this.b))}function At(){var t=St(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(Ct(this.r),", ").concat(Ct(this.g),", ").concat(Ct(this.b)).concat(1===t?")":", ".concat(t,")"))}function St(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ct(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Nt(t){return((t=Ct(t))<16?"0":"")+t.toString(16)}function kt(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||1<=e?t=n=NaN:n<=0&&(t=NaN),new Ut(t,n,e,r)}function Et(t){if(t instanceof Ut)return new Ut(t.h,t.s,t.l,t.opacity);if(!(t=!(t instanceof ot)?wt(t):t))return new Ut;if(t instanceof Ut)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),u=NaN,a=o-i,c=(o+i)/2;return a?(u=n===o?(e-r)/a+6*(e<r):e===o?(r-n)/a+2:(n-e)/a+4,a/=c<.5?o+i:2-o-i,u*=60):a=0<c&&c<1?0:u,new Ut(u,a,c,t.opacity)}function Ut(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Dt(t){return(t=(t||0)%360)<0?t+360:t}function Lt(t){return Math.max(0,Math.min(1,t||0))}function It(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}rt(ot,wt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:vt,formatHex:vt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Et(this).formatHsl()},formatRgb:mt,toString:mt}),rt(Mt,_t,it(ot,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new Mt(Ct(this.r),Ct(this.g),Ct(this.b),St(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tt,formatHex:Tt,formatHex8:function(){return"#".concat(Nt(this.r)).concat(Nt(this.g)).concat(Nt(this.b)).concat(Nt(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:At,toString:At})),rt(Ut,function(t,n,e,r){return 1===arguments.length?Et(t):new Ut(t,n,e,null==r?1:r)},it(ot,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ut(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ut(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*n,e=2*e-n;return new Mt(It(240<=t?t-240:120+t,e,n),It(t,e,n),It(t<120?240+t:t-120,e,n),this.opacity)},clamp:function(){return new Ut(Dt(this.h),Lt(this.s),Lt(this.l),St(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=St(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(Dt(this.h),", ").concat(100*Lt(this.s),"%, ").concat(100*Lt(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}));var Ot=function(t){return function(){return t}};function Yt(o){return 1==(o=+o)?Ft:function(t,n){return n-t?(e=t,r=n,i=o,e=Math.pow(e,i),r=Math.pow(r,i)-e,i=1/i,function(t){return Math.pow(e+t*r,i)}):Ot(isNaN(t)?n:t);var e,r,i}}function Ft(t,n){var e,r,i=n-t;return i?(e=t,r=i,function(t){return e+t*r}):Ot(isNaN(t)?n:t)}var jt=function t(n){var u=Yt(n);function e(n,t){var e=u((n=_t(n)).r,(t=_t(t)).r),r=u(n.g,t.g),i=u(n.b,t.b),o=Ft(n.opacity,t.opacity);return function(t){return n.r=e(t),n.g=r(t),n.b=i(t),n.opacity=o(t),n+""}}return e.gamma=t,e}(1);function Ht(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var zt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rt=new RegExp(zt.source,"g");function qt(t,n){var e,r=_(n);return null==n||"boolean"===r?Ot(n):("number"===r?Ht:"string"===r?(e=wt(n))?(n=e,jt):function(t,r){var n,e,i,o,u,a=zt.lastIndex=Rt.lastIndex=0,c=-1,l=[],s=[];for(t+="",r+="";(n=zt.exec(t))&&(e=Rt.exec(r));)(i=e.index)>a&&(i=r.slice(a,i),l[c]?l[c]+=i:l[++c]=i),(n=n[0])===(e=e[0])?l[c]?l[c]+=e:l[++c]=e:(l[++c]=null,s.push({i:c,x:Ht(n,e)})),a=Rt.lastIndex;return a<r.length&&(i=r.slice(a),l[c]?l[c]+=i:l[++c]=i),l.length<2?s[0]?(u=s[0].x,function(t){return u(t)+""}):(o=r,function(){return o}):(r=s.length,function(t){for(var n,e=0;e<r;++e)l[(n=s[e]).i]=n.x(t);return l.join("")})}:n instanceof wt?jt:n instanceof Date?function(n,e){var r=new Date;return n=+n,e=+e,function(t){return r.setTime(n*(1-t)+e*t),r}}:(e=n,!ArrayBuffer.isView(e)||e instanceof DataView?Array.isArray(n)?function(t,n){for(var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),o=new Array(e),u=0;u<r;++u)i[u]=qt(t[u],n[u]);for(;u<e;++u)o[u]=n[u];return function(t){for(u=0;u<r;++u)o[u]=i[u](t);return o}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(t,n){var e,r={},i={};for(e in null!==t&&"object"===_(t)||(t={}),n=null===n||"object"!==_(n)?{}:n)e in t?r[e]=qt(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}:Ht:function(n,e){e=e||[];var r,i=n?Math.min(e.length,n.length):0,o=e.slice();return function(t){for(r=0;r<i;++r)o[r]=n[r]*(1-t)+e[r]*t;return o}}))(t,n)}function Pt(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function Gt(t){return+t}var Bt=[0,1];function Zt(t){return t}function Vt(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:(t=isNaN(e)?NaN:.5,function(){return t});var t}function Qt(t,n,e){var r=t[0],t=t[1],i=n[0],n=n[1],i=t<r?(r=Vt(t,r),e(n,i)):(r=Vt(r,t),e(i,n));return function(t){return i(r(t))}}function Wt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),u=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<r;)i[u]=Vt(e[u],e[u+1]),o[u]=n(t[u],t[u+1]);return function(t){var n=X(e,t,1,r)-1;return o[n](i[n](t))}}function $t(){var e,r,n,i,o,u,a=Bt,c=Bt,l=qt,s=Zt;function f(){var n,e,t,r=Math.min(a.length,c.length);return s!==Zt&&(n=a[0],(e=a[r-1])<n&&(t=n,n=e,e=t),s=function(t){return Math.max(n,Math.min(e,t))}),i=2<r?Wt:Qt,o=u=null,h}function h(t){return null==t||isNaN(t=+t)?n:(o=o||i(a.map(e),c,l))(e(s(t)))}return h.invert=function(t){return s(r((u=u||i(c,a.map(e),Ht))(t)))},h.domain=function(t){return arguments.length?(a=Array.from(t,Gt),f()):a.slice()},h.range=function(t){return arguments.length?(c=Array.from(t),f()):c.slice()},h.rangeRound=function(t){return c=Array.from(t),l=Pt,f()},h.clamp=function(t){return arguments.length?(s=!!t||Zt,f()):s!==Zt},h.interpolate=function(t){return arguments.length?(l=t,f()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(t,n){return e=t,r=n,f()}}var Xt=new Date,Jt=new Date;function Kt(o,u,e,r){function a(t){return o(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return o(t=new Date(+t)),t},a.ceil=function(t){return o(t=new Date(t-1)),u(t,1),o(t),t},a.round=function(t){var n=a(t),e=a.ceil(t);return t-n<e-t?n:e},a.offset=function(t,n){return u(t=new Date(+t),null==n?1:Math.floor(n)),t},a.range=function(t,n,e){var r,i=[];if(t=a.ceil(t),e=null==e?1:Math.floor(e),!(t<n&&0<e))return i;for(;i.push(r=new Date(+t)),u(t,e),o(t),r<t&&t<n;);return i},a.filter=function(e){return Kt(function(t){if(t<=t)for(;o(t),!e(t);)t.setTime(t-1)},function(t,n){if(t<=t)if(n<0)for(;++n<=0;)for(;u(t,-1),!e(t););else for(;0<=--n;)for(;u(t,1),!e(t););})},e&&(a.count=function(t,n){return Xt.setTime(+t),Jt.setTime(+n),o(Xt),o(Jt),Math.floor(e(Xt,Jt))},a.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?a.filter(r?function(t){return r(t)%n==0}:function(t){return a.count(0,t)%n==0}):a:null}),a}var tn=Kt(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});tn.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?Kt(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):tn:null};var nn=1e3,en=6e4,rn=36e5,on=864e5,un=7*on,an=365*on,cn=Kt(function(t){t.setTime(t-t.getMilliseconds())},function(t,n){t.setTime(+t+n*nn)},function(t,n){return(n-t)/nn},function(t){return t.getUTCSeconds()}),ln=Kt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*nn)},function(t,n){t.setTime(+t+n*en)},function(t,n){return(n-t)/en},function(t){return t.getMinutes()}),sn=Kt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*nn-t.getMinutes()*en)},function(t,n){t.setTime(+t+n*rn)},function(t,n){return(n-t)/rn},function(t){return t.getHours()}),fn=Kt(function(t){return t.setHours(0,0,0,0)},function(t,n){return t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*en)/on},function(t){return t.getDate()-1});function hn(n){return Kt(function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*en)/un})}var pn=hn(0),gn=hn(1),dn=(hn(2),hn(3),hn(4)),yn=(hn(5),hn(6),Kt(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),vn=Kt(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});vn.every=function(e){return isFinite(e=Math.floor(e))&&0<e?Kt(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var ut=Kt(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*en)},function(t,n){return(n-t)/en},function(t){return t.getUTCMinutes()}),ct=Kt(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+n*rn)},function(t,n){return(n-t)/rn},function(t){return t.getUTCHours()}),mn=Kt(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/on},function(t){return t.getUTCDate()-1});function wn(n){return Kt(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/un})}var bn=wn(0),xn=wn(1),_n=(wn(2),wn(3),wn(4)),at=(wn(5),wn(6),Kt(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),Mn=Kt(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});function Tn(o,t,n,e,r,i){var u=[[cn,1,nn],[cn,5,5e3],[cn,15,15e3],[cn,30,3e4],[i,1,en],[i,5,3e5],[i,15,9e5],[i,30,18e5],[r,1,rn],[r,3,3*rn],[r,6,6*rn],[r,12,432e5],[e,1,on],[e,2,2*on],[n,1,un],[t,1,2592e6],[t,3,7776e6],[o,1,an]];function a(t,n,e){var r=Math.abs(n-t)/e,i=W(function(t){return E(t,3)[2]}).right(u,r);if(i===u.length)return o.every(nt(t/an,n/an,e));if(0===i)return tn.every(Math.max(nt(t,n,e),1));r=E(u[r/u[i-1][2]<u[i][2]/r?i-1:i],2),i=r[0],r=r[1];return i.every(r)}return[function(t,n,e){var r,i=n<t;return i&&(t=(r=[n,t])[0],n=r[1]),e=e&&"function"==typeof e.range?e:a(t,n,e),n=e?e.range(t,+n+1):[],i?n.reverse():n},a]}Mn.every=function(e){return isFinite(e=Math.floor(e))&&0<e?Kt(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var at=E(Tn(Mn,at,bn,mn,ct,ut),2),ct=(at[0],at[1],E(Tn(vn,yn,pn,fn,sn,ln),2)),An=ct[0],Sn=ct[1];function Cn(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Nn(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function kn(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function En(t){var r=t.dateTime,i=t.date,o=t.time,n=t.periods,e=t.days,u=t.shortDays,a=t.months,c=t.shortMonths,l=Fn(n),s=jn(n),f=Fn(e),h=jn(e),p=Fn(u),g=jn(u),d=Fn(a),y=jn(a),v=Fn(c),m=jn(c),w={a:function(t){return u[t.getDay()]},A:function(t){return e[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:oe,e:oe,f:se,g:xe,G:Me,H:ue,I:ae,j:ce,L:le,m:fe,M:he,p:function(t){return n[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Ze,s:Ve,S:pe,u:ge,U:de,V:ve,w:me,W:we,x:null,X:null,y:be,Y:_e,Z:Te,"%":Be},b={a:function(t){return u[t.getUTCDay()]},A:function(t){return e[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:Ae,e:Ae,f:Ee,g:Re,G:Pe,H:Se,I:Ce,j:Ne,L:ke,m:Ue,M:De,p:function(t){return n[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Ze,s:Ve,S:Le,u:Ie,U:Oe,V:Fe,w:je,W:He,x:null,X:null,y:ze,Y:qe,Z:Ge,"%":Be},x={a:function(t,n,e){n=p.exec(n.slice(e));return n?(t.w=g.get(n[0].toLowerCase()),e+n[0].length):-1},A:function(t,n,e){n=f.exec(n.slice(e));return n?(t.w=h.get(n[0].toLowerCase()),e+n[0].length):-1},b:function(t,n,e){n=v.exec(n.slice(e));return n?(t.m=m.get(n[0].toLowerCase()),e+n[0].length):-1},B:function(t,n,e){n=d.exec(n.slice(e));return n?(t.m=y.get(n[0].toLowerCase()),e+n[0].length):-1},c:function(t,n,e){return T(t,r,n,e)},d:Wn,e:Wn,f:ne,g:Bn,G:Gn,H:Xn,I:Xn,j:$n,L:te,m:Qn,M:Jn,p:function(t,n,e){n=l.exec(n.slice(e));return n?(t.p=s.get(n[0].toLowerCase()),e+n[0].length):-1},q:Vn,Q:re,s:ie,S:Kn,u:zn,U:Rn,V:qn,w:Hn,W:Pn,x:function(t,n,e){return T(t,i,n,e)},X:function(t,n,e){return T(t,o,n,e)},y:Bn,Y:Gn,Z:Zn,"%":ee};function _(c,l){return function(t){var n,e,r,i=[],o=-1,u=0,a=c.length;for(t instanceof Date||(t=new Date(+t));++o<a;)37===c.charCodeAt(o)&&(i.push(c.slice(u,o)),null!=(e=Un[n=c.charAt(++o)])?n=c.charAt(++o):e="e"===n?" ":"0",(r=l[n])&&(n=r(t,e)),i.push(n),u=o+1);return i.push(c.slice(u,o)),i.join("")}}function M(i,o){return function(t){var n,e,r=kn(1900,void 0,1);if(T(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!o||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(n=4<(e=(n=Nn(kn(r.y,0,1))).getUTCDay())||0===e?xn.ceil(n):xn(n),n=mn.offset(n,7*(r.V-1)),r.y=n.getUTCFullYear(),r.m=n.getUTCMonth(),r.d=n.getUTCDate()+(r.w+6)%7):(n=4<(e=(n=Cn(kn(r.y,0,1))).getDay())||0===e?gn.ceil(n):gn(n),n=fn.offset(n,7*(r.V-1)),r.y=n.getFullYear(),r.m=n.getMonth(),r.d=n.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),e="Z"in r?Nn(kn(r.y,0,1)).getUTCDay():Cn(kn(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(e+5)%7:r.w+7*r.U-(e+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,Nn(r)):Cn(r)}}function T(t,n,e,r){for(var i,o,u=0,a=n.length,c=e.length;u<a;){if(c<=r)return-1;if(37===(i=n.charCodeAt(u++))){if(i=n.charAt(u++),!(o=x[i in Un?n.charAt(u++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return w.x=_(i,w),w.X=_(o,w),w.c=_(r,w),b.x=_(i,b),b.X=_(o,b),b.c=_(r,b),{format:function(t){var n=_(t+="",w);return n.toString=function(){return t},n},parse:function(t){var n=M(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=_(t+="",b);return n.toString=function(){return t},n},utcParse:function(t){var n=M(t+="",!0);return n.toString=function(){return t},n}}}var Un={"-":"",_:" ",0:"0"},Dn=/^\s*\d+/,Ln=/^%/,In=/[\\^$*+?|[\]().{}]/g;function On(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",t=i.length;return r+(t<e?new Array(e-t+1).join(n)+i:i)}function Yn(t){return t.replace(In,"\\$&")}function Fn(t){return new RegExp("^(?:"+t.map(Yn).join("|")+")","i")}function jn(t){return new Map(t.map(function(t,n){return[t.toLowerCase(),n]}))}function Hn(t,n,e){n=Dn.exec(n.slice(e,e+1));return n?(t.w=+n[0],e+n[0].length):-1}function zn(t,n,e){n=Dn.exec(n.slice(e,e+1));return n?(t.u=+n[0],e+n[0].length):-1}function Rn(t,n,e){n=Dn.exec(n.slice(e,e+2));return n?(t.U=+n[0],e+n[0].length):-1}function qn(t,n,e){n=Dn.exec(n.slice(e,e+2));return n?(t.V=+n[0],e+n[0].length):-1}function Pn(t,n,e){n=Dn.exec(n.slice(e,e+2));return n?(t.W=+n[0],e+n[0].length):-1}function Gn(t,n,e){n=Dn.exec(n.slice(e,e+4));return n?(t.y=+n[0],e+n[0].length):-1}function Bn(t,n,e){n=Dn.exec(n.slice(e,e+2));return n?(t.y=+n[0]+(68<+n[0]?1900:2e3),e+n[0].length):-1}function Zn(t,n,e){n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),e+n[0].length):-1}function Vn(t,n,e){n=Dn.exec(n.slice(e,e+1));return n?(t.q=3*n[0]-3,e+n[0].length):-1}function Qn(t,n,e){n=Dn.exec(n.slice(e,e+2));return n?(t.m=n[0]-1,e+n[0].length):-1}function Wn(t,n,e){n=Dn.exec(n.slice(e,e+2));return n?(t.d=+n[0],e+n[0].length):-1}function $n(t,n,e){n=Dn.exec(n.slice(e,e+3));return n?(t.m=0,t.d=+n[0],e+n[0].length):-1}function Xn(t,n,e){n=Dn.exec(n.slice(e,e+2));return n?(t.H=+n[0],e+n[0].length):-1}function Jn(t,n,e){n=Dn.exec(n.slice(e,e+2));return n?(t.M=+n[0],e+n[0].length):-1}function Kn(t,n,e){n=Dn.exec(n.slice(e,e+2));return n?(t.S=+n[0],e+n[0].length):-1}function te(t,n,e){n=Dn.exec(n.slice(e,e+3));return n?(t.L=+n[0],e+n[0].length):-1}function ne(t,n,e){n=Dn.exec(n.slice(e,e+6));return n?(t.L=Math.floor(n[0]/1e3),e+n[0].length):-1}function ee(t,n,e){n=Ln.exec(n.slice(e,e+1));return n?e+n[0].length:-1}function re(t,n,e){n=Dn.exec(n.slice(e));return n?(t.Q=+n[0],e+n[0].length):-1}function ie(t,n,e){n=Dn.exec(n.slice(e));return n?(t.s=+n[0],e+n[0].length):-1}function oe(t,n){return On(t.getDate(),n,2)}function ue(t,n){return On(t.getHours(),n,2)}function ae(t,n){return On(t.getHours()%12||12,n,2)}function ce(t,n){return On(1+fn.count(vn(t),t),n,3)}function le(t,n){return On(t.getMilliseconds(),n,3)}function se(t,n){return le(t,n)+"000"}function fe(t,n){return On(t.getMonth()+1,n,2)}function he(t,n){return On(t.getMinutes(),n,2)}function pe(t,n){return On(t.getSeconds(),n,2)}function ge(t){t=t.getDay();return 0===t?7:t}function de(t,n){return On(pn.count(vn(t)-1,t),n,2)}function ye(t){var n=t.getDay();return 4<=n||0===n?dn(t):dn.ceil(t)}function ve(t,n){return t=ye(t),On(dn.count(vn(t),t)+(4===vn(t).getDay()),n,2)}function me(t){return t.getDay()}function we(t,n){return On(gn.count(vn(t)-1,t),n,2)}function be(t,n){return On(t.getFullYear()%100,n,2)}function xe(t,n){return On((t=ye(t)).getFullYear()%100,n,2)}function _e(t,n){return On(t.getFullYear()%1e4,n,4)}function Me(t,n){var e=t.getDay();return On((t=4<=e||0===e?dn(t):dn.ceil(t)).getFullYear()%1e4,n,4)}function Te(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+On(t/60|0,"0",2)+On(t%60,"0",2)}function Ae(t,n){return On(t.getUTCDate(),n,2)}function Se(t,n){return On(t.getUTCHours(),n,2)}function Ce(t,n){return On(t.getUTCHours()%12||12,n,2)}function Ne(t,n){return On(1+mn.count(Mn(t),t),n,3)}function ke(t,n){return On(t.getUTCMilliseconds(),n,3)}function Ee(t,n){return ke(t,n)+"000"}function Ue(t,n){return On(t.getUTCMonth()+1,n,2)}function De(t,n){return On(t.getUTCMinutes(),n,2)}function Le(t,n){return On(t.getUTCSeconds(),n,2)}function Ie(t){t=t.getUTCDay();return 0===t?7:t}function Oe(t,n){return On(bn.count(Mn(t)-1,t),n,2)}function Ye(t){var n=t.getUTCDay();return 4<=n||0===n?_n(t):_n.ceil(t)}function Fe(t,n){return t=Ye(t),On(_n.count(Mn(t),t)+(4===Mn(t).getUTCDay()),n,2)}function je(t){return t.getUTCDay()}function He(t,n){return On(xn.count(Mn(t)-1,t),n,2)}function ze(t,n){return On(t.getUTCFullYear()%100,n,2)}function Re(t,n){return On((t=Ye(t)).getUTCFullYear()%100,n,2)}function qe(t,n){return On(t.getUTCFullYear()%1e4,n,4)}function Pe(t,n){var e=t.getUTCDay();return On((t=4<=e||0===e?_n(t):_n.ceil(t)).getUTCFullYear()%1e4,n,4)}function Ge(){return"+0000"}function Be(){return"%"}function Ze(t){return+t}function Ve(t){return Math.floor(+t/1e3)}var Qe=(ut=En({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,We=ut.parse,at=ut.utcFormat,ct=ut.utcParse,ut="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||at(ut);var $e=+new Date("2000-01-01T00:00:00.000Z")?function(t){return t=new Date(t),isNaN(t)?null:t}:ct(ut);function Xe(t){return new Date(t)}function Je(t){return t instanceof Date?+t:+new Date(+t)}function Ke(e,a,n,r,i,o,u,c,l,s){var f=$t()(Zt,Zt),h=f.invert,p=f.domain,g=s(".%L"),d=s(":%S"),y=s("%I:%M"),v=s("%I %p"),m=s("%a %d"),w=s("%b %d"),b=s("%B"),x=s("%Y");function _(t){return(l(t)<t?g:c(t)<t?d:u(t)<t?y:o(t)<t?v:r(t)<t?i(t)<t?m:w:n(t)<t?b:x)(t)}return f.invert=function(t){return new Date(h(t))},f.domain=function(t){return arguments.length?p(Array.from(t,Je)):p().map(Xe)},f.ticks=function(t){var n=p();return e(n[0],n[n.length-1],null==t?10:t)},f.tickFormat=function(t,n){return null==n?_:s(n)},f.nice=function(t){var n,e,r,i,o,u=p();return(t=!t||"function"!=typeof t.range?a(u[0],u[u.length-1],null==t?10:t):t)?p((e=t,r=0,i=(n=(n=u).slice()).length-1,o=n[r],(t=n[i])<o&&(u=r,r=i,i=u,u=o,o=t,t=u),n[r]=e.floor(o),n[i]=e.ceil(t),n)):f},f.copy=function(){return t=f,Ke(e,a,n,r,i,o,u,c,l,s).domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},f}function tr(){return function(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}.apply(Ke(An,Sn,vn,yn,pn,fn,sn,ln,cn,Qe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var nr={second:"%Y-%m-%d %H:%M:%S",minute:"%Y-%m-%d %H:%M",hour:"%Y-%m-%d %H:00",day:"%Y-%m-%d",week:"%Y week %W",month:"%Y-%m",quarter:"%Y-Q%Q",year:"%Y"};function er(i){return Object.keys(i).reduce(function(t,n){var e,r;return t[n]=(e=t,r=i[n],function(t){return r(t),e}),t},{})}var rr="milestones",ir=rr+"__category_label",or=rr+"__group",ur=or+"__label",ar=ur+"-last",cr=ur+"-above",lr=ur+"__text",sr=lr+"__title",fr=lr+"__event",hr=fr+"--hover",pr={DISTRIBUTION:"top-bottom",OPTIMIZE:!1,ORIENTATION:"horizontal",MAPPING:{category:void 0,entries:void 0,timestamp:"timestamp",text:"text",url:"url",textStyle:"textStyle",titleStyle:"titleStyle"},LABEL_FORMAT:"%Y-%m-%d %H:%M",USE_LABELS:!0,AGGREGATE_BY:"minute",AUTO_RESIZE:!0,URL_TARGET:"_self"};function gr(t,n){t%=2;return"top"===n?t=!0:"bottom"===n&&(t=!1),0<t}var dr="$";function yr(){}function vr(t,n){var e=new yr;if(t instanceof yr)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var u in t)e.set(u,t[u]);return e}function mr(){var h,p,n,g=[],u=[];function d(t,e,r,i){if(e>=g.length)return null!=h&&t.sort(h),null!=p?p(t):t;for(var n,o,u,a=-1,c=t.length,l=g[e++],s=vr(),f=r();++a<c;)(u=s.get(n=l(o=t[a])+""))?u.push(o):s.set(n,[o]);return s.each(function(t,n){i(f,n,d(t,e,r,i))}),f}return n={object:function(t){return d(t,0,wr,br)},map:function(t){return d(t,0,xr,_r)},entries:function(t){return function e(t,r){if(++r>g.length)return t;var i,o=u[r-1];return null!=p&&r>=g.length?i=t.entries():(i=[],t.each(function(t,n){i.push({key:n,values:e(t,r)})})),null!=o?i.sort(function(t,n){return o(t.key,n.key)}):i}(d(t,0,xr,_r),0)},key:function(t){return g.push(t),n},sortKeys:function(t){return u[g.length-1]=t,n},sortValues:function(t){return h=t,n},rollup:function(t){return p=t,n}}}function wr(){return{}}function br(t,n,e){t[n]=e}function xr(){return vr()}function _r(t,n,e){t.set(n,e)}yr.prototype=vr.prototype={constructor:yr,has:function(t){return dr+t in this},get:function(t){return this[dr+t]},set:function(t,n){return this[dr+t]=n,this},remove:function(t){t=dr+t;return t in this&&delete this[t]},clear:function(){for(var t in this)t[0]===dr&&delete this[t]},keys:function(){var t,n=[];for(t in this)t[0]===dr&&n.push(t.slice(1));return n},values:function(){var t,n=[];for(t in this)t[0]===dr&&n.push(this[t]);return n},entries:function(){var t,n=[];for(t in this)t[0]===dr&&n.push({key:t.slice(1),value:this[t]});return n},size:function(){var t,n=0;for(t in this)t[0]===dr&&++n;return n},empty:function(){for(var t in this)if(t[0]===dr)return!1;return!0},each:function(t){for(var n in this)n[0]===dr&&t(this[n],n.slice(1),this)}};function Mr(t,n){return parseInt(t.style[n].replace("px",""),10)}function Tr(N,k,E,U,D,L,I,O,Y,F){for(var t=mr().key(function(t){return V(t).data()[0].timelineIndex}).entries(I._groups),j="top-bottom"===k?2:1,n=0,e=0;e=function(S){var C=0;return t.forEach(function(t){var A=t.values;A.forEach(function(t){var n=V(t).data()[0],o="horizontal"===L?60:20,u="horizontal"===L?A.length-n.index-1:n.index,a=V(A[u]).data()[0],c=F(N(a.key)),e=A[u][0],r=u===A.length-1;r||"top-bottom"!==k||(r=u===A.length-2&&O-c<60);var i="horizontal"===L?"offsetWidth":"offsetHeight",l="horizontal"===L?"width":"height",s=Mr(e,l),f=V(A[u]),h=!!r||kr(f).classed(ar),p="horizontal"===L?"offsetHeight":"offsetWidth",g="horizontal"===L?"padding-bottom":"padding-right",d="horizontal"===L?"padding-top":"padding-left",y=gr(u,k)?g:d,t=h?c-s<0:O<c+s;if(0===S&&(h=!!r||t,f.style(y,"0px"),kr(f).classed(ar,h)),e[i]>s||s<o||h||t){var v,m,w,b=null,x=0,_="horizontal"===L?j-1:1+j;do{}while("horizontal"===L?_++:_--,x++,0<_&&(m=(v=!(v=(m=Sr(u,j,A,p,L))<=(w="horizontal"===L?Sr(u,-1*j,A,p,L):m)&&!r)&&!r?c<o:v)?m:w,w=v?j:-1*j,f.style(y,(m=r?0:m)+"px"),kr(f).classed(ar,!v),b=Ar(N,e,u,U,D,n,w,m,c,l,p,L,I,O,F,v)),b<e[i]&&x<Cr);"horizontal"===L&&(b=Math.min(E,b)),f.style(Y,b+"px");var M,T,t=Nr(f.select(".wrapper"),"width");t<b&&(b=t+6,f.style(Y,b+"px")),0<S&&"horizontal"===L&&(t=Nr(f,"width"),M=h?c-t:c+t,A.forEach(function(t,n){var e,r,i=V(t).data()[0];i.key===a.key||Er(u,j,n)||(r=e=F(N(i.key))-5,i=V(A[n]),n=kr(i).classed(ar),h&&!n&&(e=e+Nr(i,"width")+5),!h&&n&&(e=e-Nr(i,"width")-5),(h?M<e:r<M)&&(h?r<c:c<r)&&(t=t[0][p],Nr(f,y)<t&&(r=h?e-M:M-r,r=Nr(f,Y)-r-6,o<r?(b=Math.min(b,r),f.style(Y,"".concat(b,"px"))):f.style(y,"".concat(t+5,"px")),C++)))}),T=Number.POSITIVE_INFINITY,A.forEach(function(t,n){(gr(n,k)?g:d)==y&&(n=V(A[n]),n=Nr(n,y),T=Math.min(T,n))}),0<T&&A.forEach(function(t,n){var e;0==(n+u%j)%j&&(e=V(A[n]),n=Nr(e,y),e.style(y,"".concat(n-T,"px")))}))}})}),C}(n),1===++n&&(e=1),n<Cr&&0<e;);}var Ar=function(t,n,e,r,i,o,u,a,c,l,s,f,h,p,g){var d,y=!(15<arguments.length&&void 0!==arguments[15])||arguments[15],v="horizontal"===f&&y?e+u:e-u;do{if("horizontal"===f&&y?v+=u:v-=u,void 0===(d=h._groups[v]))break}while(a>=d[0][s]);var o=(void 0===r.category?i[o.timelineIndex]:i[o.timelineIndex].entries)[v],l=Mr(n,l);return l=void 0!==o?(o=g(t(o.key)),"horizontal"===f&y?o-c-6:"horizontal"===f&!y?o-6:c-o-6):"horizontal"===f&y?p-c-6:c-6,u<0?Math.min(c,l):l},Sr=function(t,n,e,r,i){e=e,t=t,n=n,t="horizontal"===i?e[t+n]:e[t-n],n=0;return n=void 0!==t?t[0][r]+3:n},Cr=20,Nr=function(t,n){return parseInt(t.style(n).replace("px",""),10)},kr=function(t){return t.select(function(){return this.parentNode})},Er=function(t,n,e){return 0!=(e+t%n)%n};function Ur(t){if("%Y-Q%Q"!==t)return Qe(t);var e=Qe(nr.month);return function(t){var n=e(t),t=n.split("-")[1],t=Math.ceil(parseInt(t)/3);return n.split("-")[0]+"-Q"+t}}function Dr(t){if("%Y-Q%Q"!==t)return We(t);var e=We(nr.month);return function(t){if(-1===t.search("-Q")){var n=3*Math.ceil(parseInt(t.split("-")[1])/3)-2+"",n=n.length<2?"0"+n:n;return e(t.split("-")[0]+"-"+n)}n=3*parseInt(t.split("-")[1][1])+"",n=n.length<2?"0"+n:n;return e(t.split("-")[0]+"-"+n)}}function Lr(n,t,e,r){function i(t){return n(r(t[e.timestamp]))}return void 0!==e.category&&void 0!==e.entries?t=t.map(function(t,n){return{category:t[e.category],entries:o(t[e.entries],n)}}):(t=void 0!==t&&!Array.isArray(t[0])?[t]:t).map(o);function o(t,e){return mr().key(i).sortKeys(Q).entries(t).map(function(t,n){return t.index=n,t.timelineIndex=e,t})}}return function(h){var p,g,d,y,v,m,w,b=pr.DISTRIBUTION,x=pr.OPTIMIZE,_=pr.ORIENTATION,M=$e,T=Object.assign({},pr.MAPPING);function n(t){p=Ur(t)}function t(t){d=t}function e(t){"string"==typeof t&&["_blank","_self","_parent","_top"].includes(t.toLowerCase())&&(y=t)}function A(t){return"function"==typeof v&&(Z(this).classed(hr,!0),v(t)),t}function S(t){return"function"==typeof v&&(Z(this).classed(hr,!1),m(t)),t}function C(t){return"function"==typeof w&&w(t),t}n(pr.LABEL_FORMAT),t(pr.USE_LABELS),e(pr.URL_TARGET);var N=Ur(nr[pr.AGGREGATE_BY]),k=Dr(nr[pr.AGGREGATE_BY]),r={current:pr.AUTO_RESIZE};function i(t){var n="horizontal"===_?"width":"height",e="horizontal"===_?"margin-left":"margin-top",r="horizontal"===_?"milestones__horizontal_line":"milestones__vertical_line",a="horizontal"===_?180:100,i=Z(h).selectAll("."+rr),c=void 0!==t?Lr(N,t,T,M):i.data(),o=i.data(c),u=o.enter().append("div").attr("class",rr);o.exit().remove();t=parseFloat(Z(h).style(n))-11;void 0!==T.category?(u.append("div").attr("class",ir).text(function(t){return t.category}),u.append("div").attr("class","data-js-timeline").append("div").attr("class",r)):u.append("div").attr("class",r);var i=o.merge(u),l=[],o=i.selectAll("."+ir);o.each(function(t,n,e){l.push(e[n].offsetWidth)});var u=Math.round(et(l)||0),s=t-u-10;o.style("width",u+"px"),"vertical"===_&&(o.style("margin-left","-50%"),o.style("text-align","center")),i.selectAll(".data-js-timeline").style(e,u+10+"px"),i.selectAll("."+r).style(n,s+"px");var u=(void 0===T.category?i:i.selectAll(".data-js-timeline")).selectAll("."+or).data(function(t){return void 0===T.category?t:t.entries}),r=c.reduce(function(n,t){return(void 0===T.category?t:t.entries).map(function(t){return n.push(t.key)}),n},[]),r=void 0!==g?g.map(k):function(t,n){var e,r;if(void 0===n){var i,o=U(t);try{for(o.s();!(i=o.n()).done;){var u=i.value;null!=u&&(void 0===e?u<=u&&(e=r=u):(u<e&&(e=u),r<u&&(r=u)))}}catch(t){o.e(t)}finally{o.f()}}else{var a,c,l=-1,s=U(t);try{for(s.s();!(a=s.n()).done;)null!=(c=n(c=a.value,++l,t))&&(void 0===e?c<=c&&(e=r=c):(c<e&&(e=c),r<c&&(r=c)))}catch(t){s.e(t)}finally{s.f()}}return[e,r]}(r,function(t){return k(t)}),f=tr().rangeRound([0,s]).domain(r),r=u.enter().append("div").attr("class",or);u.exit().remove(),r.append("div").attr("class","milestones__group__bullet");r=r.merge(u).style(e,function(t){return f(k(t.key))+"px"});d?(u=(e=(u=r.selectAll("."+ur+"-"+_).data(function(t){return[t]})).enter().append("div").attr("class",ur+"-"+_).merge(u).classed(cr+"-"+_,function(t){return gr(t.index,b)}).selectAll("."+lr+"-"+_).data(function(t){return[t]})).enter().append("div").attr("class",lr+"-"+_).merge(e).style(n,function(t){var n,e=f(k(t.key)),r=t.index+1,i="top-bottom"===b?2:1,i=void 0===T.category?(o=c[t.timelineIndex][t.index+i],n=c[t.timelineIndex][t.index-i],c[t.timelineIndex].length):(o=c[t.timelineIndex].entries[t.index+i],n=c[t.timelineIndex].entries[t.index-i],c[t.timelineIndex].entries.length),t="horizontal"===_?o:n,o="horizontal"===_?n:o;void 0!==t?(u=f(k(t.key)),u="horizontal"===_?u-e:e-u,i-r==2&&(u/=2)):i-r==1?u="horizontal"===_?s-e:e:i-r==0&&(u=void 0!==o?(o=f(k(o.key)),"horizontal"===_?(s-o)/2:o/2):s);var u=Math.max(0,u-6);return Math.min("horizontal"===_?a:u,u)+"px"}).each(function(t){var n=gr(t.index,b),e=Z(this);e.html(null);var r,i,o=t.values.reduce(function(t,n){return void 0!==n[T.titleStyle]?Object.assign(t,n[T.titleStyle]):t},{}),u=e.append("div").classed("wrapper",!0);n&&"vertical"!==_||(r=u.append("span").classed(sr,!0).text(p(k(t.key))),Object.entries(o).forEach(function(t){var n=E(t,2),t=n[0],n=n[1];return r.style(t,n)}),u.append("br")),t.values.map(function(t,n){0<n&&u.append("br");var e=Object.assign({},t[T.textStyle]),n=t[T.text],r=-1<["jpg","jpeg","gif","png"].indexOf(n.split(".").pop())?u.append("img").classed("milestones-label",!0).classed("milestones-image-label",!0).attr("height","100").attr("src",n):(t[T.url]?u.append("a").classed("milestones-label",!0).classed("milestones-link-label",!0).attr("href",t[T.url]).attr("target",y):u.append("span").classed("milestones-label",!0).classed("milestones-text-label",!0)).text(n);r.datum({text:t[T.text],timestamp:t[T.timestamp],attributes:t}),"function"!=typeof w&&"function"!=typeof m&&"function"!=typeof v||r.classed(fr,!0),"function"==typeof w&&r.on("click",C),"function"==typeof m&&r.on("mouseleave",S),"function"==typeof v&&r.on("mouseover",A),Object.entries(e).forEach(function(t){var n=E(t,2),t=n[0],n=n[1];return r.style(t,n)})}),n&&"horizontal"===_&&(u.append("br"),i=u.append("span").classed(sr,!0).text(p(k(t.key))),Object.entries(o).forEach(function(t){var n=E(t,2),t=n[0],n=n[1];return i.style(t,n)}))}),(u=e.merge(u)).style("padding-top","0px").style("padding-bottom","0px"),x&&Tr(k,b,a,T,c,_,u,s,n,f)):r.selectAll("."+ur+"-"+_).remove(),i.each(function(t,n,e){var r=et(Z(e[n]).selectAll("* ."+cr+"-"+_)._groups[0],function(t){return t.offsetHeight}),i=et(Z(e[n]).selectAll("* :not(."+cr+"-"+_+")")._groups[0],function(t){return t.offsetHeight});"horizontal"===_?Z(e[n]).style("margin-top",10+(r||0)+"px").style("height",10+(i||0)+"px"):(i=void 0!==T.category?Math.round(100/(c.length+1))*(n+1):"50",Z(e[n]).style("margin-top","50px").style("margin-left",i+"%").style("position","absolute"))})}return new ResizeObserver(function(){null!==Z(h).node()&&window.requestAnimationFrame(function(){r.current&&i()})}).observe("string"==typeof h?document.querySelector(h):h),er({aggregateBy:function(t){N=Ur(nr[t]),k=Dr(nr[t]),n(nr[t])},mapping:function(t){T=Object.assign({},T,t)},optimize:function(t){x=t},autoResize:function(t){r.current=t},orientation:function(t){_=t,Z(h).html("")},distribution:function(t){b=t},parseTime:function(t){M=Dr(t)},labelFormat:n,urlTarget:e,useLabels:t,range:function(t){Array.isArray(t)&&2==t.length&&(g=t)},render:i,onEventClick:function(t){w=t},onEventMouseLeave:function(t){m=t},onEventMouseOver:function(t){v=t}})}});
